name: docker build image
on:
  workflow_dispatch: {}

  push:
   branches: 
    - main
  pull_request:
   branches: 
    - main
  
jobs:
   build-container:
    runs-on: ubuntu-latest
    steps:
     - uses: actions/checkout@v3
     
     - name: build docker image
       env:
          REGISTRY: ghcr.io
          OWNER: ${{ github.actor }}
          REPOSITORY: project
          IMAGE_NAME: sampleimage
       run:  
            docker build -t ${{env.REGISTRY}}/${{env.REPOSITORY}}/${{env.IMAGE_NAME}}:1 . 
     - name: docker image list
       run:
            docker images
     - name: docker push
       env:
          REGISTRY: ghcr.io
          OWNER: ${{ github.actor}}
          REPOSITORY: project
          IMAGE_NAME: sampleimage
       run: 
          docker push ${{env.REGISTRY}}/${{env.REPOSITORY}}/${{env.IMAGE_NAME}}:1

